#!/bin/sh

bkdir="$XDG_DATA_HOME/Books"

# Select file
cd "$bkdir"

picker() {
sel="$(ls | dmenu -i -l 10)"
if [ -d "$sel" ]; then
  cd "$sel"
  picker
elif
  [ -f "$sel" ]; then
  sel_file="$sel"
fi
}

picker

# Get filetype
filetype="$(file -b "$sel_file" | cut -d' ' -f1)"

# Open file
case "$filetype" in
  EPUB) $TERMINAL -c epyterm -n epyterm -f "Iosevka Nerd Font:size=19" -e epy "$sel_file"
  ;;
  PDF) zathura "$sel_file"
  ;;
esac
