#!/bin/sh

bkdir="$XDG_DATA_HOME/Books"

# Select file
cd "$bkdir"

picker() {
sel="$(ls | dmenu -i -l 10)"
if [ -d "$sel" ]; then
  cd "$sel"
  picker
elif
  [ -f "$sel" ]; then
  sel_file="$sel"
fi
}

picker

# Get filetype
filetype="$(file --mime-type -b "$sel_file")"

# Open file
case "$filetype" in
  application/epub+zip ) $TERMINAL -c epyterm -n epyterm -f "Iosevka Nerd Font:size=19" -e epy "$sel_file"
  ;;
  application/pdf ) zathura "$sel_file"
  ;;
esac
